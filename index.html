<!DOCTYPE html>
<html lang="es" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca de Scripts CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = { darkMode: 'class' }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #1d4ed8; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #1e40af; }
        .dark ::-webkit-scrollbar-track { background: #1f2937; }
        .dark ::-webkit-scrollbar-thumb { background: #fbbF24; }
        .dark ::-webkit-scrollbar-thumb:hover { background: #f59e0b; }
        .script-content { white-space: pre-wrap; word-wrap: break-word; }
        .nav-button.active { background-color: #1d4ed8; color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .dark .nav-button.active { background-color: #fbbF24; color: #111827; }
        #add-script-modal, #delete-confirm-modal, #login-modal { transition: opacity 0.3s ease; }
        
        /* Reglas de visibilidad para Admin */
        .admin-only-flex { display: none !important; }
        body.admin-mode .admin-only-flex { display: flex !important; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200 transition-colors duration-300">

    <div id="app-container" class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <header class="relative text-center mb-8">
            <img src="logoafore.png" alt="Logo Afore Coppel" class="h-12 mx-auto mb-4">
            <h1 class="text-4xl sm:text-5xl font-bold text-blue-800 dark:text-yellow-400">Biblioteca de Scripts</h1>
            <p class="text-lg text-gray-500 dark:text-gray-400 mt-2">Soluciones r√°pidas para casos de CRM en Salesforce</p>
            <div class="absolute top-0 right-0 flex items-center gap-4">
                <div id="auth-controls"></div>
                <button id="theme-toggle" class="p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none">
                    <svg id="theme-toggle-dark-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
                    <svg id="theme-toggle-light-icon" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 5.05A1 1 0 003.636 6.464l.707.707a1 1 0 001.414-1.414l-.707-.707zM3 11a1 1 0 100-2H2a1 1 0 100 2h1z" fill-rule="evenodd" clip-rule="evenodd"></path></svg>
                </button>
            </div>
        </header>

        <div class="mb-8 max-w-2xl mx-auto">
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                     <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" /></svg>
                </div>
                <input type="text" id="search-input" class="block w-full bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 rounded-full py-3 pl-10 pr-4 text-gray-900 dark:text-gray-200 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-yellow-500 transition" placeholder="Buscar por t√≠tulo o descripci√≥n...">
            </div>
        </div>

        <nav id="category-filters" class="flex flex-wrap justify-center gap-2 sm:gap-4 mb-8">
            <button data-category="all" class="nav-button active font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Todos</button>
            <button data-category="favorites" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md flex items-center gap-2">‚òÖ Favoritos</button>
            <button data-category="popular" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md flex items-center gap-2">üî• Populares</button>
            <button data-category="unificacion" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Unificaci√≥n/Separaci√≥n</button>
            <button data-category="exp" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Exp. y Serv.</button>
            <button data-category="parciales" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Retiros Parciales</button>
            <button data-category="totales" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Retiros Totales</button>
            <button data-category="extras" class="nav-button font-medium py-2 px-4 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 hover:text-white dark:hover:bg-yellow-500 dark:hover:text-gray-900 hover:shadow-md">Extras</button>
        </nav>

        <main id="scripts-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></main>
        
        <div id="loading-indicator" class="text-center py-10"><p class="text-gray-500 dark:text-gray-400">Cargando scripts desde la nube...</p></div>
    </div>

    <footer class="text-center py-8 border-t border-gray-200 dark:border-gray-700">
        <p class="text-sm text-gray-500 dark:text-gray-400">
            Herramienta creada por la Gerencia de Atenci√≥n al P√∫blico - Afore Coppel
        </p>
    </footer>

    <button id="add-script-btn" class="admin-only-flex fixed bottom-8 right-8 bg-blue-700 dark:bg-yellow-400 text-white dark:text-blue-900 w-16 h-16 rounded-full shadow-lg items-center justify-center text-3xl font-bold transform hover:scale-110 transition-transform">+</button>

    <div id="add-script-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl p-6 relative">
            <h2 id="modal-title" class="text-2xl font-bold mb-4 text-blue-800 dark:text-yellow-400">Agregar Nuevo Script</h2>
            <form id="script-form">
                <input type="hidden" id="script-id">
                <div class="space-y-4">
                    <input type="text" id="script-title" placeholder="T√≠tulo del Script" required class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600 focus:ring-blue-500 focus:border-blue-500">
                    <textarea id="script-description" placeholder="Descripci√≥n breve" required class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600" rows="2"></textarea>
                    <textarea id="script-text" placeholder="Texto completo del script..." required class="w-full p-2 border rounded font-mono dark:bg-gray-700 dark:border-gray-600" rows="6"></textarea>
                    <select id="script-category" required class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                        <option value="">-- Seleccionar Categor√≠a --</option>
                        <option value="unificacion">Unificaci√≥n/Separaci√≥n</option>
                        <option value="exp">Exp. y Serv.</option>
                        <option value="parciales">Retiros Parciales</option>
                        <option value="totales">Retiros Totales</option>
                        <option value="extras">Extras</option>
                    </select>
                    <input type="text" id="script-variables" placeholder="Variables (separadas por coma, ej: FECHA, MONTO)" class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                </div>
                <div class="mt-6 flex justify-end gap-4">
                    <button type="button" id="cancel-btn" class="py-2 px-4 rounded bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500">Cancelar</button>
                    <button type="submit" class="py-2 px-4 rounded bg-blue-700 text-white hover:bg-blue-800 dark:bg-yellow-400 dark:text-blue-900 dark:hover:bg-yellow-500">Guardar Script</button>
                </div>
            </form>
             <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl leading-none">&times;</button>
        </div>
    </div>
    
    <div id="delete-confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 text-center">
            <h2 class="text-xl font-bold mb-4">¬øEst√°s seguro?</h2>
            <p class="text-gray-600 dark:text-gray-300 mb-6">Esta acci√≥n no se puede deshacer.</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-delete-btn" class="py-2 px-6 rounded bg-gray-200 dark:bg-gray-600 hover:bg-gray-300 dark:hover:bg-gray-500">No</button>
                <button id="confirm-delete-btn" class="py-2 px-6 rounded bg-red-600 text-white hover:bg-red-700">S√≠, Eliminar</button>
            </div>
        </div>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 hidden opacity-0">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-sm p-6 relative">
            <h2 class="text-2xl font-bold mb-4 text-center text-blue-800 dark:text-yellow-400">Acceso Admin</h2>
            <form id="login-form">
                <div class="space-y-4">
                    <input type="email" id="login-email" placeholder="Correo electr√≥nico" required class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                    <input type="password" id="login-password" placeholder="Contrase√±a" required class="w-full p-2 border rounded dark:bg-gray-700 dark:border-gray-600">
                    <p id="login-error" class="text-red-500 text-sm text-center hidden"></p>
                </div>
                <div class="mt-6">
                    <button type="submit" class="w-full py-2 px-4 rounded bg-blue-700 text-white hover:bg-blue-800 dark:bg-yellow-400 dark:text-blue-900 dark:hover:bg-yellow-500">Iniciar Sesi√≥n</button>
                </div>
            </form>
            <button id="close-login-modal-btn" class="absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-gray-200 text-3xl leading-none">&times;</button>
        </div>
    </div>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, addDoc, doc, updateDoc, deleteDoc, increment } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAvq0CF94lVwGZAtXiFZKHwS5q4ZA489lM",
          authDomain: "scripts-une-gap.firebaseapp.com",
          projectId: "scripts-une-gap",
          storageBucket: "scripts-une-gap.firebasestorage.app",
          messagingSenderId: "567975326387",
          appId: "1:567975326387:web:28edbab67668d1a829f6c6",
          measurementId: "G-GJK53TR2D6"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const scriptsCollection = collection(db, 'scripts');

        let allScripts = [];
        const container = document.getElementById('scripts-container');
        const filters = document.getElementById('category-filters');
        const searchInput = document.getElementById('search-input');
        const loadingIndicator = document.getElementById('loading-indicator');
        let favorites = JSON.parse(localStorage.getItem('favoriteScripts')) || [];
        const authControls = document.getElementById('auth-controls');

        // --- FUNCI√ìN PARA MOSTRAR LAS TARJETAS (RENDER) ---
        const renderScripts = (scriptsToRender) => {
            container.innerHTML = '';
            if (scriptsToRender.length === 0 && loadingIndicator.style.display === 'none') {
                container.innerHTML = `<p class="text-gray-500 dark:text-gray-400 col-span-full text-center mt-4">No se encontraron resultados.</p>`;
                return;
            }

            const activeCategory = filters.querySelector('.active').dataset.category;
            const isPopularView = activeCategory === 'popular';
            
            scriptsToRender.forEach(script => {
                const isFavorite = favorites.includes(script.id);
                const card = document.createElement('div');
                card.className = 'relative bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transform hover:-translate-y-1 transition-all duration-300 ease-in-out flex flex-col';
                
                let variablesHtml = '';
                if (script.variables && script.variables.length > 0) {
                    variablesHtml = `<div class="mt-4 border-t border-gray-200 dark:border-gray-700 pt-3"><h4 class="text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2">Variables a Reemplazar:</h4><ul class="space-y-1">${script.variables.map(v => `<li class="text-xs bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 rounded px-2 py-1 font-mono">${v}</li>`).join('')}</ul></div>`;
                }

                let popularBadgeHtml = '';
                if (isPopularView) {
                    const usageCount = script.copyCount || 0;
                    popularBadgeHtml = `<div class="absolute top-3 right-20 flex items-center gap-1 text-xs bg-red-100 text-red-800 dark:bg-orange-900 dark:text-orange-300 px-2 py-1 rounded-full font-semibold">üî•<span>${usageCount}</span></div>`;
                }
                
                let adminOptionsHtml = `
                    <div class="admin-only-flex absolute top-2 right-10 z-10">
                         <button class="options-btn p-1 text-gray-400 hover:text-blue-700 dark:hover:text-yellow-400">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg>
                         </button>
                         <div class="options-menu absolute right-0 mt-8 w-40 bg-white dark:bg-gray-700 rounded-md shadow-lg py-1 hidden">
                            <a href="#" class="edit-btn block px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600">Modificar</a>
                            <a href="#" class="delete-btn block px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/50">Eliminar</a>
                         </div>
                    </div>`;

                card.innerHTML = `
                    ${adminOptionsHtml}
                    ${popularBadgeHtml}
                    <div class="p-6 flex-grow">
                        <div class="flex justify-between items-start">
                            <h2 class="text-xl font-bold text-blue-800 dark:text-yellow-400 mb-2 pr-20">${script.title}</h2>
                            <button class="favorite-btn absolute top-2 right-2 p-1 text-gray-400 hover:text-yellow-500 transition-colors" data-id="${script.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-star-fill pointer-events-none ${isFavorite ? 'text-yellow-500' : ''}" viewBox="0 0 16 16"><path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L._173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/></svg>
                            </button>
                        </div>
                        <p class="text-gray-600 dark:text-gray-300 text-sm mb-4">${script.description}</p>
                        <div class="bg-gray-100 dark:bg-gray-900/50 rounded-lg p-4 text-sm text-gray-700 dark:text-gray-200 max-h-48 overflow-y-auto">
                            <pre class="script-content font-sans">${script.scriptText}</pre>
                        </div>
                        ${variablesHtml}
                    </div>
                    <div class="p-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-700">
                        <button class="copy-btn w-full bg-yellow-400 text-blue-800 font-bold py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-all duration-300 ease-in-out hover:bg-yellow-500 dark:bg-yellow-400 dark:text-blue-900 dark:hover:bg-yellow-500">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/></svg>
                            <span>Copiar Script</span>
                        </button>
                    </div>
                `;
                card.dataset.id = script.id;
                container.appendChild(card);
            });
        };
        
        // --- FUNCI√ìN CENTRAL PARA APLICAR FILTROS Y B√öSQUEDA ---
        const applyFilters = () => {
             const searchTerm = searchInput.value.toLowerCase();
            const activeCategory = filters.querySelector('.active').dataset.category;
            let filteredScripts = allScripts;
            if (activeCategory === 'favorites') {
                filteredScripts = allScripts.filter(script => favorites.includes(script.id));
            } else if (activeCategory === 'popular') {
                filteredScripts = [...allScripts].sort((a, b) => (b.copyCount || 0) - (a.copyCount || 0));
            } else if (activeCategory !== 'all') {
                filteredScripts = allScripts.filter(script => script.category === activeCategory);
            }
            if (searchTerm) {
                filteredScripts = filteredScripts.filter(s => s.title.toLowerCase().includes(searchTerm) || s.description.toLowerCase().includes(searchTerm));
            }
            renderScripts(filteredScripts);
        };

        // --- MANEJO DE AUTENTICACI√ìN Y DATOS ---
        onAuthStateChanged(auth, user => {
            if (user) {
                document.body.classList.add('admin-mode');
                authControls.innerHTML = `<button id="logout-btn" class="text-sm text-gray-500 hover:text-blue-700 dark:hover:text-yellow-400">Salir</button>`;
                document.getElementById('logout-btn').addEventListener('click', () => signOut(auth));
            } else {
                document.body.classList.remove('admin-mode');
                authControls.innerHTML = `<button id="login-btn" title="Acceso Admin" class="p-1 rounded-full text-blue-600 dark:text-yellow-400 hover:text-blue-800 dark:hover:text-yellow-500"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-shield-lock" viewBox="0 0 16 16"><path d="M5.338 1.59a61.44 61.44 0 0 0-2.837.856.481.481 0 0 0-.328.39c-.554 4.157.726 7.19 2.253 9.188a10.725 10.725 0 0 0 2.287 2.233c.346.244.652.42.893.533.12.056.255.098.386.123.134.026.275.042.415.042.14 0 .281-.016.415-.042.131-.025.266-.067.386-.123.241-.113.547-.29.893-.533a10.726 10.726 0 0 0 2.287-2.233c1.527-1.997 2.807-5.031 2.253-9.188a.48.48 0 0 0-.328-.39c-.651-.213-1.75-.56-2.837-.855C9.552 1.29 8.531 1.067 8 1.067c-.53 0-1.552.223-2.662.524zM5.072.56C6.157.265 7.31 0 8 0s1.843.265 2.928.56c1.11.3 2.229.655 2.887.87a1.54 1.54 0 0 1 1.044 1.262c.596 4.477-.787 7.795-2.465 9.99a11.775 11.775 0 0 1-2.517 2.453 7.018 7.018 0 0 1-1.048.625c-.28.132-.581.24-.829.24s-.548-.108-.829-.24a7.016 7.016 0 0 1-1.048-.625 11.777 11.777 0 0 1-2.517-2.453C1.928 10.487.545 7.169 1.141 2.692A1.54 1.54 0 0 1 2.185 1.43 62.456 62.456 0 0 1 5.072.56z"/><path d="M9.5 6.5a1.5 1.5 0 0 1-1 1.415l.385 1.965a.5.5 0 1 1-.966.19l-.385-1.965a1.5 1.5 0 1 1 1.966-1.606z"/></svg></button>`;
                document.getElementById('login-btn').addEventListener('click', openLoginModal);
            }
            applyFilters();
        });

        onSnapshot(scriptsCollection, (snapshot) => {
            allScripts = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
            loadingIndicator.style.display = 'none';
            applyFilters();
        });

        // --- L√ìGICA DE EVENTOS DE UI ---
        container.addEventListener('click', async function(e) {
            const copyButton = e.target.closest('.copy-btn');
            const favButton = e.target.closest('.favorite-btn');
            const optionsButton = e.target.closest('.options-btn');
            const editButton = e.target.closest('.edit-btn');
            const deleteButton = e.target.closest('.delete-btn');

            if (copyButton) { 
                const card = copyButton.closest('.relative');
                const scriptText = card.querySelector('.script-content').textContent;
                const scriptId = card.dataset.id;
                navigator.clipboard.writeText(scriptText);
                
                // Incrementar contador en Firebase
                const scriptRef = doc(db, 'scripts', scriptId);
                await updateDoc(scriptRef, { copyCount: increment(1) });
                
                const originalHTML = copyButton.innerHTML;
                copyButton.innerHTML = `<span>¬°Copiado!</span>`;
                copyButton.classList.add('bg-green-100', 'dark:bg-green-900/50');
                setTimeout(() => { copyButton.innerHTML = originalHTML; copyButton.classList.remove('bg-green-100', 'dark:bg-green-900/50');}, 2000);
            }
            if (favButton) {
                const scriptId = favButton.dataset.id;
                const starIcon = favButton.querySelector('svg');
                if (favorites.includes(scriptId)) {
                    favorites = favorites.filter(id => id !== scriptId);
                    starIcon.classList.remove('text-yellow-500');
                } else {
                    favorites.push(scriptId);
                    starIcon.classList.add('text-yellow-500');
                }
                localStorage.setItem('favoriteScripts', JSON.stringify(favorites));
                if (filters.querySelector('.active').dataset.category === 'favorites') applyFilters();
            }
            
            if (optionsButton) {
                document.querySelectorAll('.options-menu').forEach(m => {
                    if (m !== optionsButton.nextElementSibling) m.classList.add('hidden');
                });
                optionsButton.nextElementSibling.classList.toggle('hidden');
            }
            if (editButton) {
                const scriptId = e.target.closest('[data-id]').dataset.id;
                openEditModal(scriptId);
            }
            if (deleteButton) {
                const scriptId = e.target.closest('[data-id]').dataset.id;
                openDeleteModal(scriptId);
            }
        });

        document.body.addEventListener('click', (e) => {
            if (!e.target.closest('.options-btn')) {
                document.querySelectorAll('.options-menu').forEach(m => m.classList.add('hidden'));
            }
        });
        
        filters.addEventListener('click', (e) => {
            if (e.target.tagName === 'BUTTON') {
                filters.querySelector('.active').classList.remove('active');
                e.target.classList.add('active');
                applyFilters();
            }
        });
        searchInput.addEventListener('input', applyFilters);

        // --- L√ìGICA MODALES ---
        const loginModal = document.getElementById('login-modal');
        const loginForm = document.getElementById('login-form');
        const closeLoginModalBtn = document.getElementById('close-login-modal-btn');
        const loginError = document.getElementById('login-error');
        
        const openLoginModal = () => { loginModal.classList.remove('hidden'); setTimeout(() => loginModal.classList.remove('opacity-0'), 10); };
        const closeLoginModal = () => { loginModal.classList.add('opacity-0'); setTimeout(() => { loginModal.classList.add('hidden'); loginForm.reset(); loginError.classList.add('hidden'); }, 300); };
        
        closeLoginModalBtn.addEventListener('click', closeLoginModal);
        loginModal.addEventListener('click', (e) => { if (e.target === loginModal) closeLoginModal(); });
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            signInWithEmailAndPassword(auth, email, password)
                .then(() => closeLoginModal())
                .catch(error => { loginError.textContent = 'Credenciales incorrectas.'; loginError.classList.remove('hidden'); });
        });
        
        const modal = document.getElementById('add-script-modal');
        const addScriptBtn = document.getElementById('add-script-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const form = document.getElementById('script-form');
        const modalTitle = document.getElementById('modal-title');
        const scriptIdInput = document.getElementById('script-id');

        const openModal = (title = "Agregar Nuevo Script") => { modalTitle.textContent = title; modal.classList.remove('hidden'); setTimeout(() => modal.classList.remove('opacity-0'), 10); };
        const closeModal = () => { modal.classList.add('opacity-0'); setTimeout(() => { modal.classList.add('hidden'); form.reset(); scriptIdInput.value = ''; }, 300); };
        
        addScriptBtn.addEventListener('click', () => openModal());
        cancelBtn.addEventListener('click', closeModal);
        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });

        const openEditModal = (id) => {
            const scriptToEdit = allScripts.find(s => s.id === id);
            if (!scriptToEdit) return;
            scriptIdInput.value = id;
            document.getElementById('script-title').value = scriptToEdit.title;
            document.getElementById('script-description').value = scriptToEdit.description;
            document.getElementById('script-text').value = scriptToEdit.scriptText;
            document.getElementById('script-category').value = scriptToEdit.category;
            document.getElementById('script-variables').value = (scriptToEdit.variables || []).join(', ');
            openModal("Modificar Script");
        };

        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const scriptId = scriptIdInput.value;
            const scriptData = {
                title: document.getElementById('script-title').value,
                description: document.getElementById('script-description').value,
                scriptText: document.getElementById('script-text').value,
                category: document.getElementById('script-category').value,
                variables: document.getElementById('script-variables').value.split(',').map(v => v.trim()).filter(v => v)
            };
            try {
                if (scriptId) { 
                    const scriptRef = doc(db, 'scripts', scriptId);
                    await updateDoc(scriptRef, scriptData); 
                } 
                else { 
                    scriptData.copyCount = 0; // Iniciar contador para nuevos scripts
                    await addDoc(scriptsCollection, scriptData); 
                }
                closeModal();
            } catch (error) { console.error("Error al guardar: ", error); alert("Hubo un error al guardar el script."); }
        });

        const deleteModal = document.getElementById('delete-confirm-modal');
        const confirmDeleteBtn = document.getElementById('confirm-delete-btn');
        const cancelDeleteBtn = document.getElementById('cancel-delete-btn');
        let scriptToDeleteId = null;

        const openDeleteModal = (id) => { scriptToDeleteId = id; deleteModal.classList.remove('hidden'); setTimeout(() => deleteModal.classList.remove('opacity-0'), 10); };
        const closeDeleteModal = () => { deleteModal.classList.add('opacity-0'); setTimeout(() => { deleteModal.classList.add('hidden'); scriptToDeleteId = null; }, 300); };
        
        cancelDeleteBtn.addEventListener('click', closeDeleteModal);
        deleteModal.addEventListener('click', (e) => { if (e.target === deleteModal) closeDeleteModal(); });
        confirmDeleteBtn.addEventListener('click', async () => {
            if (!scriptToDeleteId) return;
            try {
                await deleteDoc(doc(db, 'scripts', scriptToDeleteId));
                closeDeleteModal();
            } catch (error) { console.error("Error al eliminar: ", error); alert("Hubo un error al eliminar el script."); }
        });
        
        const themeToggle = document.getElementById('theme-toggle');
        const darkIcon = document.getElementById('theme-toggle-dark-icon');
        const lightIcon = document.getElementById('theme-toggle-light-icon');
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            lightIcon.classList.remove('hidden');
        } else {
            document.documentElement.classList.remove('dark');
            darkIcon.classList.remove('hidden');
        }
        themeToggle.addEventListener('click', () => {
            darkIcon.classList.toggle('hidden');
            lightIcon.classList.toggle('hidden');
            document.documentElement.classList.toggle('dark');
            localStorage.setItem('color-theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
        });

        window.migrateInitialData = async () => {
             const initialScripts = [
                { category: 'unificacion', title: 'En revisi√≥n con el Infonavit', copyCount: 0, description: 'Cuando el √°rea nos indica que el tramite de Separaci√≥n de cuentas se encuentra en revisi√≥n con INFONAVIT.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que actualmente, tu solicitud de Separaci√≥n de Cuentas se encuentra en revisi√≥n detallada por parte del Instituto de vivienda, se esta llevando a cabo el an√°lisis correspondiente para asegurar una separaci√≥n precisa y correcta de tu cuenta. Le solicitamos amablemente esperar la finalizaci√≥n de este proceso.\n\nEs importante tener en cuenta que el tiempo estimado para la Separaci√≥n de Cuentas es de aproximadamente 30 d√≠as h√°biles. Sin embargo, le informamos que este periodo podr√≠a extenderse en caso de que los institutos involucrados requieran un tiempo adicional para completar las validaciones necesarias.\n\nAgradecemos de antemano su comprensi√≥n y paciencia durante este proceso. Le aseguramos que estamos atentos al avance de su solicitud.`, variables: [] },
                { category: 'unificacion', title: 'Se envia al PASO AL', copyCount: 0, description: 'Cuando el caso de Unificaci√≥n de Cuentas se tomara en cuenta para el "PASO AL" y tiene que acudir a la subdelegaci√≥n.', scriptText: `Te informamos que hemos estado trabajando en tu solicitud para brindarte el servicio requerido. En relaci√≥n a tu tr√°mite de Unificaci√≥n de Cuentas, te comunicamos que este se encuentra actualmente en proceso de revisi√≥n por parte del instituto.\n\nCon el objetivo de agilizar este proceso y poder continuar con el servicio de manera m√°s eficiente, te recomendamos atentamente acudir a la subdelegaci√≥n del Instituto Mexicano del Seguro Social (IMSS) que te corresponda y solicitar la notificaci√≥n de la unificaci√≥n directamente a su Administradora de Fondos para el Retiro (Afore).\n\nAgradecemos profundamente tu paciencia y la confianza depositada en nosotros. Tenga la seguridad de que continuaremos trabajando con el mayor compromiso para brindarle el mejor servicio y experiencias memorables`, variables: [] },
                { category: 'unificacion', title: 'Se encontraba en revisi√≥n por INFONAVIT (Ya se tuvo respuesta)', copyCount: 0, description: 'Cuando el caso de separaci√≥n de cuentas se encontraba en revisi√≥n por parte de INFONAVIT y ya se obtuvo una respuesta.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos sobre el avance de tu Separaci√≥n de Cuentas. Este proceso estuvo detenido mientras esper√°bamos respuesta de parte del instituto de vivienda, donde se realizaba el an√°lisis correspondiente de tu cuenta.\n\nAhora, nos complace comunicarte que tu servicio ha retomado su curso y se encuentra nuevamente en proceso. Se iniciar√° un nuevo an√°lisis para lograr la finalizaci√≥n de su tr√°mite.\n\nEs importante tener en cuenta que el tiempo estimado para la Separaci√≥n de Cuentas es de aproximadamente 30 d√≠as h√°biles. Sin embargo, te informamos que este periodo podr√≠a extenderse en caso de que los institutos involucrados requieran un tiempo adicional para completar las validaciones necesarias.\n\nAgradecemos tu paciencia durante la espera y te aseguramos nuestro compromiso para concluir tu Separaci√≥n de Cuentas lo antes posible.`, variables: [] },
                { category: 'unificacion', title: 'NSS en el certificado para Unificaci√≥n', copyCount: 0, description: 'Cuando es necesario que nos comparta una certificaci√≥n donde venga el NSS tal, para continuar con la validaci√≥n.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que en seguimiento a tu Unificaci√≥n de Cuentas, actualmente no procede por falta de la Certificaci√≥n de Regularizaci√≥n y/o Correcci√≥n de Datos Personales que vincule el NSS (Colocar NSS).\n\nTe invitamos acudir al IMSS para obtener dicho documento y enviarlo al correo ueapcoppel@aforecoppel.com para continuar con tu tr√°mite.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Colocar NSS'] },
                { category: 'unificacion', title: 'Algun NSS debera estar registrado para la Unificaci√≥n', copyCount: 0, description: 'Cuando ning√∫n miembro de la familia se encuentra registrado con alguna administradora, deber√°n por lo menos registrar alg√∫n nss.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu proceso de Unificaci√≥n de Cuentas actualmente no procede debido a una inconsistencia en el registro de uno de tus NSS.\n\nPara corregir esta situaci√≥n y continuar con tu unificaci√≥n, te invitamos a acudir a uno de nuestros m√≥dulos de atenci√≥n de Afore Coppel con tu Certificado de Regularizaci√≥n y/o Correcci√≥n de Datos Personales. Al momento de tu visita, es importante que le solicites al Asesor Previsional que se contacte con la Unidad Especializada (UNE) para recibir el apoyo adecuado durante el registro.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'unificacion', title: 'Separaci√≥n de Cuentas con disposici√≥n', copyCount: 0, description: 'Cuando el √°rea nos menciona "Separaci√≥n con disposici√≥n, en an√°lisis".', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu solicitud de separaci√≥n de cuentas se encuentra en revisi√≥n. Ya que se ha detectado una disposici√≥n de recursos en la cuenta individual, por lo que estamos llevando a cabo un an√°lisis detallado para dictaminar los saldos correctos.\n\nEs importante tener en cuenta que el tiempo estimado para el proceso la Separaci√≥n de Cuentas es de aproximadamente 30 d√≠as h√°biles. Sin embargo, te informamos que este periodo podr√≠a extenderse en caso de que los institutos involucrados requieran un tiempo adicional para completar las validaciones necesarias\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'unificacion', title: 'Constancia de conclusi√≥n Uni/Sep', copyCount: 0, description: 'Cuando le compartimos la constancia de conclusi√≥n al trabajador sobre su servicio de Separaci√≥n/Unificaci√≥n.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que actualmente nos encontramos disponibles para atenderte como te mereces, adicional te informamos que tu (Colocar Servicio) ya concluy√≥ con √©xito por lo que te enviamos tu constancia de conclusi√≥n para los fines correspondientes.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Colocar Servicio'] },
                { category: 'exp', title: 'Diagnostico F52', copyCount: 0, description: 'Cuando un Beneficiario intenta modificar un dato certificable y ya cuenta con un derecho cargado.', scriptText: `Le informamos que su solicitud de alta de expediente como beneficiario no pudo ser procesada. Esto se debe a que existe un derecho cargado ante la empresa operadora que impide la modificaci√≥n de un dato certificable.\n\nHemos estado trabajando para resolver esta situaci√≥n. Por ello, lo invitamos a intentar realizar su tr√°mite nuevamente a partir del (Fecha de respuesta del contigente en el que se envio).\n\nAgradecemos su paciencia y la confianza que ha depositado en nosotros. Seguimos comprometidos en brindarle el mejor servicio.`, variables: ["(Fecha de respuesta del contigente en el que se envio)"] },
                { category: 'exp', title: 'Cambio de Genero', copyCount: 0, description: 'Cuando el trabajador realizo su cambio de genero y quiere modificar su CURP.', scriptText: `Reiterando nuestro compromiso de brindarte la atenci√≥n y servicio en relaci√≥n a tu Cuenta Individual te informamos que estuvimos revisando tu caso, se detecta que tu servicio no ha sido √©xitoso debido a que tu CURP hist√≥rica no se encuentra ligada en RENAPO, esto quiere decir que tu CURP no esta ligada en BDNSAR por lo cual no puede ser consultada al momento de realizar tu modificaci√≥n CURP, por lo que para solucionarlo es necesario que acudas a RENAPO o bien, env√≠es un correo electr√≥nico a la direcci√≥n electr√≥nica: tramitecurp@segob.gob.mx, indicando que al consultar la CURP certificada esta no aparece correcta con tu CURP hist√≥rica ligada, (te brindamos la liga en donde podr√°s consultarla para corroborar la informaci√≥n https://www.gob.mx/curp/ ) , el deber ser es que al momento de consultar tu CURP hist√≥rica esta debe aparecer ligada a la CURP ya certificada por ello la importancia de que env√≠es el correo a RENAPO o acudas de manera presencial explicando la situaci√≥n para que lleven a cabo la regularizaci√≥n de tus datos a la brevedad posible y una vez solucionada, continuar con tu servicio para modificar tu CURP en uno de nuestros m√≥dulos de Atenci√≥n.\n\nEs importante aclarar que este tr√°mite es personal√≠simo, es decir lo debes hacer t√∫. Al momento de acudir a RENAPO o enviar el correo electr√≥nico debes anexar tu Acta de nacimiento y tu Identificaci√≥n oficial Original y Vigente.\n\nTe proporcionamos la liga en donde podr√°s visualizar los m√≥dulos de RENAPO as√≠ como, la l√≠nea telef√≥nica para recibir orientaci√≥n. https://www.gob.mx/cms/uploads/attachment/file/39942/DirectoriodeModulosCURP.pdf \nTel√©fono 800 911 1111`, variables: [] },
                { category: 'exp', title: 'Estatus Incompleto', copyCount: 0, description: 'Cuando el servicio de modificaci√≥n/expediente quedan en estatus incompleto desde modulo.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que los servicios que realizaste no finalizaron correctamente, debido a que los servicios quedaron en estatus incompleto desde modulo por lo que no avanzar√≥n a su validaci√≥n, te invitamos a realizar nuevamente el tramite correspondiente con uno de nuestros asesores previsionales.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'CURP historica no aparece en RENAPO', copyCount: 0, description: 'Cuando no se puede generar la constancia CURP al querer realizar una actualizaci√≥n del expediente, y en 360 no cuenta con informaci√≥n en RENAPO.', scriptText: `Reiterando nuestro compromiso de brindarte la atenci√≥n y servicio en relaci√≥n a tu Cuenta Individual\nte informamos que estuvimos revisando tu caso, se detecta que tu servicio no ha sido √©xito debido a\nque tu CURP hist√≥rica no se encuentra en RENAPO, esto quiere decir que tu CURP no tiene\ninformaci√≥n en BDNSAR por lo cual no puede ser consultada al momento de realizar tu modificaci√≥n\nCURP, por lo que para solucionarlo es necesario que acudas a RENAPO o bien, env√≠es un correo\nelectr√≥nico a la direcci√≥n electr√≥nica: tramitecurp@segob.gob.mx, indicando que al consultar la CURP\ncertificada esta aparece correcta con tu CURP hist√≥rica ligada, pero al realizar la consulta con la\nCURP hist√≥rica, √©sta no aparece (te brindamos la liga en donde podr√°s consultarla para corroborar la\ninformaci√≥n https://www.gob.mx/curp/ ) , el deber ser es que al momento de consultar tu CURP\nhist√≥rica esta debe aparecer ligada a la CURP ya certificada sin embargo, en tu caso la consulta en la\np√°gina de RENAPO indica que ‚ÄúLos datos ingresados no son correctos‚Äù lo que ocasiona el problema\nya que, no se encuentra activa tu CURP hist√≥rica por ello la importancia de que env√≠es el correo a\nRENAPO o acudas de manera presencial explicando la situaci√≥n para que lleven a cabo la\nregularizaci√≥n de tus datos a la brevedad posible y una vez solucionada, continuar con tu servicio\npara modificar tu CURP en uno de nuestros m√≥dulos de Atenci√≥n.\n\nEs importante aclarar que este tr√°mite es personal√≠simo, es decir lo debes hacer t√∫. Al momento de\nacudir a RENAPO o enviar el correo electr√≥nico debes anexar tu Acta de nacimiento y tu Identificaci√≥n\noficial Original y Vigente.\n\nTe proporcionamos la liga en donde podr√°s visualizar los m√≥dulos de RENAPO as√≠ como, la l√≠nea\ntelef√≥nica para recibir orientaci√≥n.\nhttps://www.gob.mx/cms/uploads/attachment/file/39942/DirectoriodeModulosCURP.pdf\nTel√©fono 800 911 1111`, variables: [] },
                { category: 'exp', title: 'Error en la huella del trabajador', copyCount: 0, description: 'Cuando en plataforma al querer enrolar sus huellas, le arroja el mensaje ‚ÄúError en la huella del trabajador‚Äù.', scriptText: `Te informamos que alguna de las im√°genes enviadas para el Enrolamiento del Trabajador no puede ser reconocida como huella dactilar, por ejemplo, por falta/exceso de presi√≥n, toma parcial, presencia de fondo negro, etc. Por lo tanto, es importante seguir intentando realizar el servicio verificando que los sensores est√©n en √≥ptimas condiciones.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Marca Modificaci√≥n de datos IMSS', copyCount: 0, description: 'Cuando al querer realizar un servicio cuenta con la marca ‚ÄúModificaci√≥n de datos IMSS‚Äù.', scriptText: `Te informamos que tu cuenta se encuentra en un proceso operativo derivado de una Modificaci√≥n de datos IMSS, por lo que para poder realizar tu servicio es necesario que tu cuenta se encuentre libre de este proceso activo, por ello es importante esperar a que finalice correctamente, o bien, te invitamos acudir al IMSS para realizar la aclaraci√≥n correspondiente sobre dicho proceso.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Expediente actualizado con √©xito', copyCount: 0, description: 'Cuando el trabajador ya cuenta con su expediente actualizado correctamente.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que se refleja que ya cuentas con tu expediente de identificaci√≥n conformado desde el d√≠a (Fecha) por lo que te invitamos a realizar el servicio que deseas.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Fecha'] },
                { category: 'exp', title: 'Diagn√≥stico M44 (Riesgo por comprobante de domicilio)', copyCount: 0, description: 'Rechazo en validaci√≥n debido a que el comprobante de domicilio se encuentra fuera de vigencia.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que el tr√°mite que realizaste present√≥ un rechazo en validaci√≥n debido a que el comprobante de domicilio que brindaste se encuentra fuera de vigencia, te invitamos acudir nuevamente a un m√≥dulo de atenci√≥n de Afore Coppel para realizar el servicio nuevamente. Es muy importante presentar el comprobante de domicilio original y no mayor a 3 meses de antig√ºedad.\n\n Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Diagn√≥stico M37 (Riesgo por domicilio diferente OCR)', copyCount: 0, description: 'El comprobante de domicilio que brindaste presenta inconsistencias.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que el tr√°mite que realizaste present√≥ un rechazo en validaci√≥n debido a que el comprobante de domicilio que brindaste presenta inconsistencias, te invitamos acudir nuevamente a un m√≥dulo de atenci√≥n de Afore Coppel para realizar el servicio de nuevo. Es muy importante presentar el comprobante de domicilio original y no mayor a 3 meses de antig√ºedad.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Diagn√≥stico L14 (ID o Fotograf√≠a no corresponden)', copyCount: 0, description: 'El Tipo de Documento no corresponde al ID para la Identificaci√≥n Oficial o la Fotograf√≠a.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que el tr√°mite que realizaste present√≥ un rechazo en validaci√≥n debido a que la identificaci√≥n oficial o fotograf√≠a que se anexaron no corresponden, por ello, te invitamos acudir nuevamente a un m√≥dulo de atenci√≥n de Afore Coppel para realizar el servicio nuevamente. Es muy importante presentar una identificaci√≥n v√°lida y vigente para realizar el servicio.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Diagn√≥stico M43 (Riesgo por identificaci√≥n vencida OCR)', copyCount: 0, description: 'Rechazo en validaci√≥n debido a que la identificaci√≥n oficial que presentaste se encuentra vencida.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que el tr√°mite que realizaste present√≥ un rechazo en validaci√≥n debido a que la identificaci√≥n oficial que presentaste se encuentra vencida, por ello, te invitamos acudir nuevamente a un m√≥dulo de atenci√≥n de Afore Coppel para realizar el servicio de nuevo. Es muy importante presentar una identificaci√≥n v√°lida y vigente para realizar el servicio.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'exp', title: 'Diagn√≥stico M36 (Riesgo por autenticaci√≥n de identidad no exitosa OCR)', copyCount: 0, description: 'No fue posible validar la identidad del titular y del beneficiario con los documentos enviados.', scriptText: `En relaci√≥n con tu reciente solicitud. Lamentablemente, no fue exitosa porque no fue posible validar la identidad del titular y del beneficiario con los documentos enviados.\n\nPara ayudarte a completar tu tr√°mite con √©xito, te compartimos la lista de documentos correctos que debes presentar.\n\nDocumentos Requeridos:\n\n1. Para el Titular:\n-Identificaci√≥n Oficial. Si no cuentas con la INE del titular, por favor anexa uno de los siguientes documentos:\n\n-Acta de nacimiento del titular.\n-Acta de matrimonio vigente (con antig√ºedad no mayor a 6 meses).\n-Carta de Identidad expedida por el ayuntamiento.\n-Constancia de tr√°mite expedida por el INE.\n-Resoluci√≥n de Pensi√≥n (este documento es siempre la opci√≥n preferente).\nNota importante: El acta de defunci√≥n no se considera un documento v√°lido para la identificaci√≥n del titular.\n\n2. Para el Beneficiario:\n-Identificaci√≥n Oficial vigente.\n\n3. Documentos Generales:\n-Acta de defunci√≥n.\n-Comprobante de domicilio a color (con antig√ºedad no mayor a 3 meses).\n\nConsejo Adicional: Recuerda que la Resoluci√≥n de Pensi√≥n es un documento muy completo. Adem√°s de servir para identificar al titular, tambi√©n puedes usarla para comprobar el parentesco y la personalidad del beneficiario.`, variables: [] },
                { category: 'parciales', title: 'Pago Exitoso', copyCount: 0, description: 'Cuando el trabajador solicita estatus de su retiro parcial y este se refleja aceptado y pagado.', scriptText: `Te informamos que tu deposito fue procedente y puesto a tu disposici√≥n el d√≠a "FECHA" mediante la cuenta bancaria que proporcionaste al momento de la solicitud con terminaci√≥n "√öltimos 4 d√≠gitos" con numero de referencia bancaria "Referencia bancaria", te invitamos a validar tu deposito. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ["FECHA", "√öltimos 4 d√≠gitos", "Referencia bancaria"] },
                { category: 'totales', title: 'Saldos de vivienda homologados', copyCount: 0, description: 'Cuando el proceso de homologaci√≥n de saldos de vivienda con INFONAVIT finaliz√≥ correctamente.', scriptText: `Queremos informarte que hemos estado trabajando con mucho esfuerzo en tu solicitud para brindarte el servicio que requieres. Nos complace comunicarte que hemos completado las acciones necesarias y te confirmamos que tus saldos han sido homologados correctamente.\n\nAhora, para que puedas disponer de los recursos de tu subcuenta de VIVIENDA, te invitamos cordialmente a acudir a tu m√≥dulo de atenci√≥n de Afore Coppel m√°s cercano. All√≠, un asesor Previsional te asistir√° para finalizar el servicio y puedas realizar tu retiro.\n\nAgradecemos enormemente tu paciencia y la confianza que has depositado en nosotros durante este proceso. Ten la seguridad de que seguimos trabajando para ofrecerte el mejor servicio y experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Libre de Marca Operativa', copyCount: 0, description: 'Cuando la cuenta del trabajador presentaba una marca y ahora se encuentra libre de procesos operativos.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te informamos que tu cuenta se encontraba en un proceso operativo, sin embargo, actualmente se encuentra libre de proceso por lo que te invitamos a verificar la informaci√≥n. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorable.`, variables: [] },
                // NUEVOS SCRIPTS
                { category: 'extras', title: 'Proceso de Reinversi√≥n (saldo previo)', copyCount: 0, description: 'Cuando el trabajador presenta dudas sobre la diferencia de sus saldos, ocasionada por el proceso de saldo previo', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. A continuaci√≥n, te explicamos el motivo por el cual observas una diferencia temporal en tus saldos.\n\nEsto se debe a que tu cuenta pas√≥ por un proceso llamado "saldo previo". Este procedimiento inicia cuando acudes al IMSS para tramitar tu pensi√≥n. El instituto solicita a la Afore los saldos de Retiro, Cesant√≠a y Vejez (RCV), los cuales se desinvierten temporalmente de tu cuenta individual para que se pueda realizar el c√°lculo de tu pensi√≥n. Este proceso puede durar hasta 30 d√≠as h√°biles. Una vez que el IMSS concluye su c√°lculo, solicita a tu Afore que los recursos se reinviertan en tu cuenta individual, permiti√©ndote continuar con tu proceso en la Afore tras la emisi√≥n de tu resoluci√≥n. Por lo tanto, te confirmamos que tus saldos se encuentran correctos y podr√°s validarlo en tu pr√≥ximo estado de cuenta o en un resumen de movimientos.\n\nEs importante aclarar que en este proceso no se toma en cuenta el saldo de vivienda, ya que el INFONAVIT es quien administra directamente esos recursos.\n\nAgradecemos tu paciencia y esperamos que esta informaci√≥n haya aclarado tus dudas.`, variables: [] },
                { category: 'totales', title: 'Inconformidad de saldos derivado del Amparo 73', copyCount: 0, description: 'Cuando el trabajador est√° inconforme con los saldos otorgados derivado al Amparo 73', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que a continuaci√≥n te explicamos m√°s a detalle tu caso, el tipo de derecho con el que cuentas corresponde a un Amparo de Pensi√≥n R√©gimen 1973, en las pensiones otorgadas al amparo de la Ley del Seguro Social de 1973, los recursos correspondientes a las subcuentas de Cesant√≠a en edad avanzada y Vejez, Cuota Social y Estatal de tu cuenta individual de Afore, son transferidas por la Afore al Gobierno Federal para financiar tu pensi√≥n, por lo que afore te deposita √∫nicamente los saldos de Retiro 97 y vivienda 97 y en caso de contar con saldos de SAR 92 y vivienda 92 tambi√©n se te depositan, el resto se transfiri√≥ al Gobierno Federal para el financiamiento de tu pensi√≥n.\n\nPor lo que la diferencia de saldos que detectas es derivada de la transferencia que se hizo para el financiamiento de tu pensi√≥n. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Minusval√≠as', copyCount: 0, description: 'Cuando el trabajador presenta dudas sobre disminuciones en su saldos y se deben a minusval√≠as', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te explicamos que tu dinero de tu Afore se invierte para crecer y es normal que tenga "altibajos" por los movimientos del mercado. A estas bajas temporales se les llama minusval√≠a.\n\nLo m√°s importante es que sepas que no es una p√©rdida real de tu dinero, solo es una disminuci√≥n de su valor en este momento. Como tu ahorro es a largo plazo, la tendencia es que se recupere y siga creciendo. La CONSAR, que es la autoridad que nos supervisa, vigila siempre que tu dinero est√© seguro.\n\nEsperamos que esto te brinde tranquilidad. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Pago Por Aplicar', copyCount: 0, description: 'Cuando tiene un diagn√≥stico con c√≥digo (1), por aplicar.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu dep√≥sito est√° en proceso de aplicaci√≥n y estar√° disponible a m√°s tardar en 24 horas. La acreditaci√≥n final depende exclusivamente de tu instituci√≥n bancaria. Te recordamos que es crucial que tu cuenta est√© activa y con l√≠mites de abono (MTU) suficientes, ya que cualquier inconsistencia podr√≠a causar alg√∫n rechazo.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Fondos Insuficientes en la Cuenta', copyCount: 0, description: 'Cuando tiene un diagn√≥stico con c√≥digo (3), fondos insuficientes en la cuenta.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que hemos revisado el estatus de tu pago y lamentamos informarte que fue rechazado. El banco nos notific√≥ que hab√≠a "Fondos Insuficientes en la Cuenta" para completar la transacci√≥n. Para que podamos concluir tu dep√≥sito, te pedimos que valides con tu banco que la cuenta no solo cuente con los fondos necesarios, sino que tambi√©n tenga el l√≠mite de abono mensual (MTU) suficiente para recibir el pago, es importante que nos confirmes por este mismo medio cuando la situaci√≥n est√© resuelta. Agradecemos tu comunicaci√≥n y confianza. ¬°Estamos aqu√≠ para ayudarte!`, variables: [] },
                { category: 'extras', title: 'Suspensi√≥n Temporal', copyCount: 0, description: 'Cuando tiene un diagn√≥stico con c√≥digo (9), suspensi√≥n temporal.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu dep√≥sito fue rechazado por el banco. El banco nos notific√≥ que tu cuenta se encuentra en suspensi√≥n temporal, para poder reenviar tu pago, es indispensable que te comuniques con tu instituci√≥n bancaria y regularices el estatus de tu cuenta. Por favor, aseg√∫rate tambi√©n de que tu l√≠mite de abono mensual (MTU) sea suficiente para recibir el pago. Es importante que nos notifiques por este mismo medio en cuanto tu cuenta est√© activa nuevamente, o bien, env√≠anos un nuevo estado de cuenta de otra cuenta bancaria a tu nombre con los datos correctos.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Caracter Invalido', copyCount: 0, description: 'Cuando tiene un diagn√≥stico con c√≥digo (29), car√°cter invalido.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu dep√≥sito fue rechazado por el banco. El rechazo indica un "Car√°cter Inv√°lido" en los datos. Esto significa que hubo un error de captura en el CLABE, RFC o en el nombre del titular, para poder reenviar tu pago, es indispensable que verifiques y corrijas los datos bancarios, y te asegures que tu cuenta cuente con el l√≠mite de abono mensual (MTU) suficiente para recibir el monto total. Es importante, que nos notifiques por este mismo medio cuando la correcci√≥n est√© lista para procesar tu dep√≥sito nuevamente, o bien, env√≠anos un nuevo estado de cuenta de otra cuenta bancaria a tu nombre con los datos correctos.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Tipo de operaci√≥n err√≥nea', copyCount: 0, description: 'Cuando tiene un diagn√≥stico con c√≥digo (26), tipo de operaci√≥n err√≥nea', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu dep√≥sito fue rechazado por el banco. Recibimos una notificaci√≥n de "Tipo de Operaci√≥n Err√≥nea". Esto indica un error t√©cnico en el sistema de recepci√≥n del banco, Para poder reenviar su pago, es indispensable que te comuniques con tu instituci√≥n bancaria y resuelva este problema. Por favor, confirma que tu cuenta cuente con el l√≠mite de abono mensual (MTU) suficiente para recibir el monto total, es importante que nos notifiques por este mismo medio cuando tu banco te confirme que el problema est√° solucionado, o bien, env√≠anos un nuevo estado de cuenta de otra cuenta bancaria a tu nombre con los datos correctos.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'extras', title: 'Rechazos Bancarios (General)', copyCount: 0, description: 'Rechazos bancarios con diagn√≥stico: (30) Exc lmt de sdo aut de la cta, (31) Exc lmt abon perm xmes n l cta, (12) Cuenta bloqueada, etc.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud, por lo que te indicamos que tu retiro fue aprobado por nuestra parte. Sin embargo, la transferencia de tus recursos no se pudo completar, ya que recibimos un rechazo de tu banco con el siguiente motivo: [Aqu√≠ se debe escribir el motivo exacto del rechazo bancario]\n\nPara continuar y asegurar que recibas tu dinero sin inconvenientes, por favor, elige una de las siguientes opciones:\n\n1.Soluciona el problema con tu banco y notificarnos por este medio cuando tu cuenta est√© lista para recibir la transferencia.\n2.Env√≠anos un nuevo estado de cuenta de otra cuenta bancaria que est√© a tu nombre.\n\nSi eliges la segunda opci√≥n, aseg√∫rate de que el documento cumpla con todos los siguientes requisitos:\n\n-Titularidad: Debe estar a tu nombre completo.\n-CLABE: La cuenta CLABE de 18 d√≠gitos debe ser clara y legible.\n-RFC: Tu RFC debe ser visible y coincidir con el que tienes registrado con nosotros.\n-Vigencia: El documento no debe tener m√°s de 3 meses de antig√ºedad.\n-L√≠mites: La cuenta no debe tener un l√≠mite de dep√≥sito o este debe ser suficiente para recibir el monto.\n-Estado: La cuenta debe estar activa.\n\nEs importante que env√≠es el documento en formato PDF (sin contrase√±a) o como imagen en respuesta a este correo lo antes posible para continuar. Quedamos a la espera.`, variables: ['Aqu√≠ se debe de escribir el motivo exacto del rechazo bancario'] },
                { category: 'parciales', title: 'Diagn√≥stico J62', copyCount: 0, description: 'Cuando se presentan diferencias del √∫ltimo Salario Base de Cotizaci√≥n notificado por el IMSS contra el √∫ltimo Salario Base de Cotizaci√≥n registrado en la BDNSAR.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu tr√°mite no concluy√≥ exitosamente, esto es debido a que a partir del 30 de Julio del 2024 Derivado de la publicaci√≥n de las modificaciones a las Disposiciones de Car√°cter General en Materia de Operaciones de los Sistemas de Ahorro para el Retiro, se integr√≥ una nueva validaci√≥n al proceso de certificaci√≥n del retiro parcial por desempleo por parte del IMSS, es decir, que al momento de la certificaci√≥n se detectaron diferencias entre el salario base de cotizaci√≥n registrado en el IMSS y en la empresa operadora, es por ello que tu caso se encuentra en proceso de Conciliaci√≥n con los institutos, dicho proceso tiene una vigencia de 20 d√≠as naturales a partir de la fecha de tu intento de retiro (Colocar fecha de retiro) por lo que una vez cumpli√©ndose el lapso de tiempo mencionado puedes acudir a uno de nuestros m√≥dulos de Afore Coppel para realizar nuevamente tu servicio.\n\nDurante este periodo tu cuenta presentar√° una marca operativa, por lo que es importante no volver a intentar el servicio antes de los 20 d√≠as naturales, ya que el plazo de la marca se extender√° al √∫ltimo intento de Retiro, impidiendo que el servicio proceda exitosamente.\n\nAgradecemos tu paciencia y habernos dado la oportunidad de poder ayudarte de la mejor manera posible.`, variables: ['Colocar fecha de retiro'] },
                { category: 'parciales', title: 'Diagn√≥stico J52', copyCount: 0, description: 'Rechazo en el IMSS, el asegurado tiene reconocidas menos de 150 semanas de cotizaci√≥n a la fecha de matrimonio.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu tr√°mite no concluy√≥ exitosamente, uno de los requisitos que establece el Instituto para poder realizar este retiro es que cuentes con al menos 150 semanas de cotizaci√≥n reconocidas a la fecha del matrimonio, el cual revisando tu caso se identifica que tienes menos de 150 semanas de cotizaci√≥n reconocidas a la fecha de tu matrimonio, en caso de que identifiques en el reporte de tus semanas cotizadas que si cumples con las 150 semanas a la fecha del matrimonio deber√°s acudir directamente a IMSS para que verifiquen y aclaren el total de tus semanas cotizadas.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico J53', copyCount: 0, description: 'Rechazo IMSS, el matrimonio se celebr√≥ despu√©s de 90 d√≠as h√°biles a partir de la baja como asegurado, por lo que se encuentra fuera de la conservaci√≥n de derechos para recibir esta prestaci√≥n.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu tr√°mite no concluyo exitosamente, esto es debido a que el matrimonio se celebr√≥ despu√©s de 90 d√≠as h√°biles a partir de la baja como asegurado, para poder obtener este derecho debes de estar vigente en el IMSS a la fecha del matrimonio o bien dentro de los 90 d√≠as h√°biles dado de baja, por lo que en tu caso se encuentra fuera de la conservaci√≥n de derechos para recibir esta prestaci√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico J54', copyCount: 0, description: 'Rechazo IMSS, el de la fecha en que contrajo matrimonio civil es anterior al 01 de julio de 1997.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que lamentablemente tu tr√°mite no concluy√≥ exitosamente, esto ocurri√≥ derivado a que uno de los requisitos que establece el Instituto para poder realizar este retiro es que el matrimonio se debe contraer despu√©s del al 01 de julio de 1997, revisando tu caso se detecta que la fecha en que contrajiste matrimonio civil es anterior al 01 de julio de 1997, por lo que no podr√°s realizar este retiro por que se encuentra fuera de la conservaci√≥n de derechos para recibir esta prestaci√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico J55', copyCount: 0, description: 'Rechazo IMSS, Prestaci√≥n otorgada previamente, con motivo de haber contra√≠do matrimonio con anterioridad.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos qu√© entendemos tu preocupaci√≥n por el estatus de tu tr√°mite, y te explicamos el motivo del tr√°mite por lo que lamentablemente no fue procedente. Tu solicitud de retiro por matrimonio no pudo ser aprobada porque el beneficio ya se te otorg√≥ previamente. Este tr√°mite solo puede efectuarse una √∫nica vez en la vida al contraer matrimonio civil, y tu prestaci√≥n ya fue utilizada con anterioridad.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico J58.', copyCount: 0, description: 'Rechazo IMSS, se encuentra registrado un tr√°mite de retiro por Desempleo, hasta despu√©s de los 120 d√≠as posteriores podr√° realizar el tr√°mite.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos entendemos tu preocupaci√≥n por el estatus de tu tr√°mite, y te explicamos que lamentablemente no pudo ser aprobado, ya que se encuentra registrado un retiro por desempleo en tu cuenta individual. Existe un periodo de espera obligatorio por parte del instituto debes esperar 120 d√≠as despu√©s de tu retiro por desempleo para poder iniciar el tr√°mite de retiro por matrimonio, por lo que te invitamos a esperar a que se concluya el periodo establecido para poder iniciar tu servicio nuevamente.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Retiro Aportaci√≥n Voluntaria Corto Plazo', copyCount: 0, description: 'Cuando a√∫n no se cumplen los 6 meses de su primera aportaci√≥n o su √∫ltimo retiro.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu Retiro de Aportaciones voluntarias lamentablemente no concluy√≥ de manera exitosa, debido a que se detecta que a√∫n no cumples con el requisito de esperar 6 meses desde tu primera aportaci√≥n o desde tu √∫ltimo retiro. Una vez que pase este tiempo, podr√°s realizar el tr√°mite de retiro de tu ahorro voluntario sin problemas.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Retiro Aportaci√≥n Voluntaria Complementaria', copyCount: 0, description: 'Cuando a√∫n no cumple los 65 a√±os o no cuenta con un derecho otorgado para disponer de estos saldos.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para el Retiro de Aportaciones Voluntarias, la cual lamentablemente no pudo concluir de manera exitosa en este momento. Te explicamos la raz√≥n: este tipo de aportaci√≥n se puede retirar sin aplicar una retenci√≥n de impuestos una vez que cuentes con la edad de 65 a√±os o al tener el derecho de pensi√≥n otorgado por parte del IMSS. Al no cumplir actualmente con alguno de estos dos requisitos, la solicitud no puede proceder bajo esa modalidad. Sin embargo, es importante que sepas que s√≠ es posible disponer de estos saldos de forma anticipada, pero en ese caso la ley establece que se debe aplicar una retenci√≥n de impuestos (ISR) por no cumplir con la edad de retiro. Por lo tanto, podr√°s disponer de tus recursos sin esta retenci√≥n una vez que cumplas con la condici√≥n de la edad o la pensi√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Retiro Aportaciones de largo plazo', copyCount: 0, description: 'Informaci√≥n detallada sobre el retiro de aportaciones a largo plazo', scriptText: `Te informamos que estuvimos trabajando en tu solicitud y, para darte una respuesta clara, queremos explicarte c√≥mo funcionan las Aportaciones Voluntarias a Largo Plazo.\n\nEs importante recordar que este tipo de ahorro est√° dise√±ado para obtener beneficios fiscales si el dinero permanece invertido por un m√≠nimo de 5 a√±os. Si decides retirar tus recursos antes de que se cumpla este plazo, la ley establece dos consecuencias fiscales importantes. Primero, se pierde el beneficio de la deducibilidad de impuestos que este ahorro te permite. Segundo, se debe aplicar una retenci√≥n provisional del 20% de ISR sobre el monto total del retiro.\n\nTe recordamos que este mecanismo de ahorro fue creado para mantener la inversi√≥n por el tiempo m√≠nimo y as√≠ aprovechar sus ventajas. Si tu objetivo es tener dinero disponible en menos tiempo, te sugerimos explorar otros tipos de aportaciones voluntarias, como las de corto plazo.\n\nAgradecemos tu paciencia y la oportunidad de aclarar tus dudas.`, variables: [] },
                { category: 'parciales', title: 'Requisitos Para Retiro por Desempleo IMSS.', copyCount: 0, description: 'Cuando el trabajador solicita los requisitos para realizar el retiro por desempleo IMSS', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Entendemos que est√°s buscando informaci√≥n sobre los requisitos para realizar un retiro por desempleo. ¬°Con gusto te los compartimos!\n\nRequisitos, para ser elegible para el retiro parcial por desempleo, debes cumplir con las siguientes condiciones:\n-Tener al menos 46 d√≠as naturales en situaci√≥n de desempleo.\n-No haber solicitado este retiro en los 5 a√±os anteriores a la fecha de tu tr√°mite.\n-Tener una Cuenta Individual activa en una AFORE.\n\nExpediente de Identificaci√≥n:\n-Tu Expediente de Identificaci√≥n es esencial para procesar tu solicitud, ya que valida tu identidad y tus datos de manera biom√©trica:\n-Es importante que tu Expediente de Identificaci√≥n est√© actualizado y con tu Enrolamiento Biom√©trico completo.\n-El expediente tiene una vigencia de 5 a√±os.\n(Si tu expediente est√° vencido o le falta informaci√≥n, debes acudir a un m√≥dulo de AFORE Coppel para actualizarlo antes de iniciar el tr√°mite de retiro)\n\nDocumentaci√≥n:\n-Identificaci√≥n oficial vigente (INE, pasaporte, etc.).\n-Comprobante de domicilio reciente.\n-CURP.\n-N√∫mero de Seguridad Social (NSS).\n-Car√°tula de tu Estado de Cuenta bancario.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Retiro Por Desempleo IMSS (Montos) Modalidad "A"', copyCount: 0, description: 'Cuando el trabajador solicite informaci√≥n acerca de la modalidad A en un retiro por desempleo.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y hemos confirmado que el tipo de retiro realizado corresponde a la Modalidad A de retiro por desempleo. Esta modalidad aplica a cuentas individuales que tienen al menos tres a√±os de haber sido abiertas y cuentan con un m√≠nimo de doce bimestres de cotizaci√≥n (dos a√±os) acreditados ante el Instituto. De acuerdo con la normativa de la Ley del IMSS que rige este proceso, el monto a otorgar es el equivalente a 30 d√≠as de tu √∫ltimo Salario Base de Cotizaci√≥n (SBC), con un l√≠mite de hasta 10 veces el salario m√≠nimo mensual general que rige en la Ciudad de M√©xico, por lo cual el saldo que te fue otorgado respeta esta l√≥gica legal; para mayor conocimiento, puedes consultar directamente ante el IMSS dicha informaci√≥n, ya que el Instituto es quien establece estos criterios y determina los montos finales.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Retiro Por Desempleo IMSS (Montos) Modalidad "B"', copyCount: 0, description: 'Cuando el trabajador solicite informaci√≥n acerca de la modalidad B en un retiro por desempleo.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y hemos confirmado que el tipo de retiro efectuado corresponde a la Modalidad B de retiro por desempleo. Esta opci√≥n est√° disponible para trabajadores cuya Cuenta Individual tiene 5 a√±os o m√°s de haber sido abierta. El monto que te fue entregado en una sola exhibici√≥n se calcul√≥ respetando los criterios establecidos por la Ley del IMSS, la cual indica que se otorga la cantidad que resulte ser la menor entre dos opciones: el equivalente a 90 d√≠as de tu Salario Base de Cotizaci√≥n (SBC) de las √∫ltimas 250 semanas cotizadas o el 11.5% del total de tus recursos acumulados en la subcuenta de Retiro, Cesant√≠a y Vejez (RCV); con base en esta l√≥gica, el monto entregado es correcto. Para mayor conocimiento o detalles espec√≠ficos sobre el c√°lculo, te recomendamos consultar directamente ante el IMSS, ya que el Instituto es quien establece estos criterios y determina los montos finales a otorgar.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Inconformidad saldos Modalidad ‚ÄúB‚Äù (11.5%)', copyCount: 0, description: 'Cuando el trabajador est√° inconforme con los saldos entregados. Cuando se entrega el 11. 5% de acuerdo al c√°lculo emitido por el IMSS.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y hemos confirmado que, al realizar el c√°lculo de tu retiro por desempleo bajo la Modalidad B, la cantidad entregada corresponde al 11.5% del saldo de tu Subcuenta de Retiro, Cesant√≠a y Vejez (RCV), y no a los 90 d√≠as de tu Salario Base de Cotizaci√≥n (SBC). Esto se debe a que, por ley, se debe otorgar siempre la cantidad que resulte menor entre esas dos opciones, y en tu caso, el 11.5% del saldo de RCV fue la cantidad m√°s baja. Adicionalmente, te aclaramos que en el c√°lculo del 11.5% del total de tu subcuenta RCV no se incluyen los recursos correspondientes a INFONAVIT, ya que, aunque la AFORE te los muestra en el estado de cuenta con fines informativos, el saldo f√≠sico y su administraci√≥n se encuentran directamente en el Instituto del Fondo Nacional de la Vivienda para los Trabajadores (INFONAVIT).\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Inconformidad saldos Modalidad ‚ÄúB‚Äù (90 D√≠as)', copyCount: 0, description: 'Cuando el trabajador est√° inconforme con los saldos entregados. Cuando se entrega el monto de 90 d√≠as del √∫ltimo SBC de acuerdo al c√°lculo emitido por el IMSS.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y hemos confirmado que, al realizar el c√°lculo de tu retiro por desempleo bajo la Modalidad B, la cantidad entregada corresponde al equivalente a 90 d√≠as de tu Salario Base de Cotizaci√≥n (SBC). Esto se debe a que, por ley, se debe otorgar siempre la cantidad que resulte menor entre dos opciones (90 d√≠as de SBC o el 11.5% del saldo de RCV), y en tu caso, los 90 d√≠as de SBC fue la cantidad m√°s baja a la que ten√≠as derecho. Adicionalmente, te aclaramos que en el c√°lculo del 11.5% de la subcuenta RCV (la opci√≥n comparativa) no se incluyen los recursos correspondientes a INFONAVIT, ya que la AFORE solo los refleja en el estado de cuenta con fines informativos, pero el saldo f√≠sico y su administraci√≥n se encuentran directamente en el Instituto del Fondo Nacional de la Vivienda para los Trabajadores (INFONAVIT).\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Inconformidad saldos Modalidad ‚ÄúA‚Äù', copyCount: 0, description: 'Trabajador inconforme con los saldos , cuando se hace entrega de Modalidad "A"', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y entendemos tu inconformidad respecto al monto liquidado en tu retiro por desempleo bajo la Modalidad A. Queremos reiterar que el c√°lculo del pago se adhiere estrictamente a lo establecido en la Ley del Seguro Social (IMSS). Para esta modalidad, el monto m√°ximo a otorgar es el equivalente a 30 d√≠as de tu √∫ltimo Salario Base de Cotizaci√≥n (SBC), limitado legalmente a 10 veces el salario m√≠nimo mensual general vigente en la Ciudad de M√©xico (CDMX). Si consideras que el c√°lculo no refleja correctamente tu SBC o tienes dudas sobre los criterios aplicados, te recomendamos acudir directamente a una subdelegaci√≥n del IMSS, ya que es el Instituto la √∫nica entidad facultada por ley para establecer y validar tu derecho.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico 522', copyCount: 0, description: 'El Trabajador no re√∫ne los requisitos del art√≠culo 191 de la LSS 97.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y hemos detectado que tu tr√°mite de retiro parcial por desempleo fue rechazado debido a que no re√∫nes los requisitos estipulados en el Art√≠culo 191 de la Ley del IMSS.\n\nTe compartimos los requisitos, y te invitamos a validarlo en tu constancia de semanas cotizadas.\n-Contar con tu Expediente de Identificaci√≥n con tus datos y biom√©tricos actualizados.\n-La Solicitud de Retiro por Desempleo debe presentarse a partir de los 46 d√≠as naturales desde la fecha en que se realiz√≥ tu baja de tu √∫ltimo empleo y del IMSS.\n-Tener al menos 3 a√±os de haberte registrado en una AFORE.\n-Que hayan transcurrido 5 a√±os desde tu √∫ltimo Retiro por Desempleo.\n-Haber cotizado en el IMSS un m√≠nimo de 12 bimestres (aproximadamente 2 a√±os, o 104 semanas cotizadas).\n\nSi tienes dudas sobre tus semanas cotizadas o tu historial laboral, te sugerimos consultar directamente ante el IMSS, ya que el Instituto es quien administra y certifica esa informaci√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico 521', copyCount: 0, description: 'El Trabajador realiz√≥ un retiro por desempleo anteriormente y a√∫n no han transcurrido 5 a√±os.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, entendemos que esta situaci√≥n te genere preocupaci√≥n, por lo que te detallamos el motivo del rechazo de tu solicitud:\n\nHemos validado tu solicitud de retiro parcial, y te informamos que no fue aprobada debido a que se identifica que realizaste un retiro por desempleo dentro de los √∫ltimos 5 a√±os. Dado que este servicio solo se puede realizar una vez cada 5 a√±os tu solicitud no fue procedente.\n\nPor lo tanto, es necesario que esperes a que se cumpla el tiempo establecido, para que puedas iniciar nuevamente la solicitud.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico 525', copyCount: 0, description: 'Existen diferencias con el nombre registrado en el IMSS. El Trabajador deber√° acudir a la ventanilla del Instituto a aclarar la causa del rechazo', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Entendemos que esta situaci√≥n te genera preocupaci√≥n, y a continuaci√≥n te detallamos el motivo del rechazo de tu solicitud.\n\nTu tr√°mite no procedi√≥ debido a un error de datos en tu expediente. Hemos detectado diferencias en tu nombre registrado en tu cuenta AFORE y la informaci√≥n que tiene el IMSS.\n\nPara corregir esto y poder continuar con tu tr√°mite, es indispensable que acudas a una ventanilla del IMSS para realizar la actualizaci√≥n oficial de tus datos personales y tu N√∫mero de Seguridad Social (NSS).\n\nUna vez que el IMSS certifique y corrija oficialmente tu informaci√≥n, podremos continuar el proceso de retiro.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico 523', copyCount: 0, description: 'Cuando el Trabajador a√∫n no cumple con 46 d√≠as de desempleo', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Entendemos que esta situaci√≥n te genera preocupaci√≥n, y a continuaci√≥n te detallamos el motivo del rechazo de tu solicitud.\n\nEn este momento, la solicitud no pudo ser finalizada debido a que no cumples con los 46 d√≠as naturales dado baja autorizados, lo cual es un requisito indispensable de la Ley del Seguro Social (LSS).\n\nPara que puedas validar tu estatus de baja y la fecha de tu √∫ltima cotizaci√≥n con precisi√≥n, te invitamos a consultar tu Constancia de Semanas Cotizadas o acceder a la siguiente p√°gina oficial del IMSS:\nhttps://serviciosdigitales.imss.gob.mx/semanascotizadas-web/usuarios/LoginAsegurado\n\nUna vez que cumplas con los 46 d√≠as requeridos, podr√°s iniciar tu solicitud nuevamente. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Diagn√≥stico 520', copyCount: 0, description: 'El Trabajador no re√∫ne los requisitos del art√≠culo 191 de la LSS 97', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Entendemos que esta situaci√≥n te genera preocupaci√≥n, y a continuaci√≥n te detallamos el motivo del rechazo de tu solicitud.\n\nHemos revisado su solicitud de retiro parcial por desempleo y le informamos que no pudo ser aprobada debido a que usted se encuentra cotizando activamente al IMSS a la fecha de la solicitud. Le recordamos que la Ley del Seguro Social exige como requisito clave haber estado dado de baja oficialmente del IMSS por un m√≠nimo de 46 d√≠as naturales antes de poder iniciar el tr√°mite.\n\nPara que pueda verificar su estatus laboral y su fecha de baja con precisi√≥n, le invitamos a consultarlo en la siguiente p√°gina oficial, descargando su Constancia de Semanas Cotizadas: https://serviciosdigitales.imss.gob.mx/semanascotizadas-web/usuarios/LoginAsegurado.\n\nUna vez que cumpla con los d√≠as requeridos y su estatus de baja est√© confirmado por el IMSS, estaremos aqu√≠ para ayudarle a iniciar su tr√°mite nuevamente.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Trabajador no reconoce el retiro', copyCount: 0, description: 'Cuando el trabajador no reconoce el retiro por desempleo de su cuenta individual.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Entendemos tu preocupaci√≥n al no reconocer este movimiento.\n\nQueremos confirmarte que hemos verificado los registros y se identifica un retiro por desempleo en tu cuenta con fecha [Indicar fecha del retiro].\n\nDada la naturaleza sensible y segura de este tr√°mite, el cual requiere tu Firma Electr√≥nica SAR (validaci√≥n biom√©trica mediante huellas o rostro), es nuestra prioridad descartar cualquier posibilidad de irregularidad.\n\nPara agilizar la verificaci√≥n y asegurar la autenticidad de esta solicitud, te solicitamos amablemente nos proporciones la Imagen de tu INE (vigente y legible). Esta documentaci√≥n nos permitir√° cruzar la informaci√≥n biom√©trica y de identidad para confirmar que la solicitud fue realizada por ti o, en caso contrario, iniciar los procedimientos correspondientes.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Indicar fecha del retiro'] },
                { category: 'parciales', title: 'Requisitos Para Retiro por Matrimonio IMSS.', copyCount: 0, description: 'Cuando el trabajador solicita los requisitos para realizar el retiro por Matrimonio IMSS.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido y agradecemos tu inter√©s en conocer los requisitos para el Retiro Parcial por Matrimonio. Este es un derecho que, por ley, puedes ejercer una sola vez en tu vida.\n\nPara poder iniciar tu solicitud y acceder a este beneficio, es indispensable que cumplas con los siguientes requisitos:\n-Contar con tu Expediente de Identificaci√≥n con tus datos y biom√©tricos actualizados (huellas dactilares, fotograf√≠a y firma digital).\n-Tener un m√≠nimo de 150 semanas cotizadas en el IMSS acreditadas antes de la fecha de celebraci√≥n de tu matrimonio.\n-Es necesario estar vigente ante el IMSS bajo la Ley 97.\n-No haber solicitado anteriormente este beneficio.\n-Si ya no est√°s cotizando al IMSS, podr√°s solicitar esta prestaci√≥n siempre y cuando te hayas casado dentro de los 90 d√≠as h√°biles siguientes a tu fecha de baja.\n\nUna vez que cumplas con todos estos requisitos, podremos procesar tu solicitud. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'totales', title: 'Cargas DATAMAR NO CARGADA EN SICI', copyCount: 0, description: 'Cuando solicitamos la carga DATAMART del derecho del trabajador.', scriptText: `Te informamos que hemos iniciado el proceso para solicitar la carga de tu resoluci√≥n ante la empresa operadora. Es importante mencionar que la conclusi√≥n de este proceso depende de la gesti√≥n del Instituto Mexicano del Seguro Social (IMSS).\n\nAdicionalmente, y con el objetivo de agilizar el proceso en la medida posible, te recomendamos acudir a la subdelegaci√≥n del IMSS correspondiente para solicitar el Reimpacto de tu resoluci√≥n ante la empresa operadora. Realizar este tr√°mite de manera paralela puede contribuir a una gesti√≥n m√°s eficiente.\n\nTe compartimos el siguiente directorio para que puedas ubicar la subdelegaci√≥n que te corresponde: www.imss.gob.mx/directorio.`, variables: [] },
                { category: 'totales', title: 'Pensi√≥n por invalidez ( Es Temporal)', copyCount: 0, description: 'Cuando el trabajador presenta el derecho por invalidez, a√∫n no cumple con los 60 a√±os y es de car√°cter temporal.', scriptText: `Tras la revisi√≥n del dictamen emitido por el Instituto Mexicano del Seguro Social (IMSS), lamentamos informarte que, de acuerdo a la resoluci√≥n emitida, no cumples con los criterios establecidos para obtener una pensi√≥n por invalidez de car√°cter definitivo. La resoluci√≥n emitida corresponde a una invalidez temporal, por lo que tu derecho otorgado actualmente no puede ser cargado ante el instituto para una pensi√≥n definitiva.\n\nAgradecemos profundamente tu paciencia y la confianza depositada en nosotros durante este proceso. Ten la seguridad de que seguiremos trabajando con compromiso para ofrecerte el mejor servicio y experiencias memorables en el futuro.\n\nEn caso de tener alguna duda o requerir mayor informaci√≥n sobre tu dictamen, te sugerimos contactar directamente al IMSS para que puedan brindarte detalles espec√≠ficos sobre tu resoluci√≥n de invalidez temporal y los pasos a seguir.`, variables: [] },
                { category: 'totales', title: 'Negativa 97 por cesant√≠a y a√∫n no tiene 60 a√±os.', copyCount: 0, description: 'Cuando el trabajador presenta el derecho por Negativa de pensi√≥n del r√©gimen 97 y aun no cumple la edad de 60 a√±os.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que de acuerdo al derecho que presentas de una negativa de pensi√≥n por cesant√≠a bajo el r√©gimen del 97, no eres acreedor a solicitar los recursos de tu cuenta en este momento.\n\nEsto se debe a que, actualmente no has alcanzado la edad m√≠nima requerida de 60 a√±os para que te corresponda una pensi√≥n por cesant√≠a bajo el r√©gimen mencionado, ser√° necesario que te presentes nuevamente a la subdelegaci√≥n del IMSS que te corresponda una vez cumplas con la edad m√≠nima requerida de 60 a√±os, para iniciar un nuevo servicio de solicitud de pensi√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables`, variables: [] },
                { category: 'totales', title: 'Diagn√≥stico 233 RFC Prevalidador', copyCount: 0, description: 'Cuando se presenta un rechazo en el diagn√≥stico pre validado infonavit por 233 RFC.', scriptText: `Queremos informarte que hemos estado trabajando en tu solicitud de retiro total. Comprendemos la importancia de este tr√°mite para ti y lamentamos sinceramente cualquier inconveniente que la demora haya podido causarte.\n\nAl revisar tu caso, hemos identificado el motivo por el cual tu solicitud no ha podido avanzar: es indispensable que tu RFC a 13 posiciones sea correctamente capturado en el apartado de "Datos generales del trabajador". Este es el detalle que nos impide dar continuidad a tu proceso.\n\nPor ello, te invitamos a acudir nuevamente a uno de nuestros m√≥dulos de Afore Coppel y comentarle al Asesor Previsional la importancia de agregar tu RFC a 13 posiciones en la secci√≥n mencionada.\n\nAgradecemos sinceramente tu paciencia y la confianza que has depositado en Afore Coppel. Ten la seguridad de que seguimos trabajando para brindarte el mejor servicio y experiencias memorables.`, variables: [] },
                { category: 'totales', title: 'Marca Saldos Previos Vigente', copyCount: 0, description: 'Cuando la marca de saldos previos est√° vigente y a√∫n no se cumplen los 30 d√≠as h√°biles de vigencia.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu cuenta se encuentra en proceso de Consulta de Saldos Previos por parte del IMSS, la cual tiene una duraci√≥n de 30 d√≠as h√°biles a partir del d√≠a (Fecha de inicio), por lo que es importante esperar a que concluya dicho proceso para realizar el tr√°mite de retiro total debido a que es el proceso que se lleva a cabo para hacer los c√°lculos de la cantidad a entregar en tu pensi√≥n.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Fecha de inicio'] },
                { category: 'totales', title: 'Carta de Agotamiento de Recursos.', copyCount: 0, description: 'Cuando el trabajador nos solicita su carta de agotamiento de recursos debido a su pensi√≥n garantizada.', scriptText: `Te informamos que estuvimos trabajando en su solicitud para poder brindarle el servicio requerido. Por este medio presente le notificamos que, respecto al contrato que usted celebr√≥ con Afore Coppel S. A. de C. V. para la administraci√≥n de su retiro por Pensi√≥n Garantizada, se realiz√≥ su √∫ltimo pago mensual y con esto los recursos de su Cuenta Individual han sido agotados, con lo cual damos por terminado dicho contrato.\n\nAgradecemos su paciencia as√≠ como su confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: [] },
                { category: 'totales', title: 'Cuenta con cr√©dito vivienda.', copyCount: 0, description: 'Cuando el trabajador intenta disponer de sus saldos de vivienda, sin embargo, no procede debido a que cuenta con un cr√©dito de vivienda.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud de retiro total. Al validar tu cuenta, identificamos que actualmente se registra un cr√©dito de vivienda activo. La normativa establece que mientras un cr√©dito est√© vigente, el saldo de la Subcuenta de Vivienda no puede ser retirado. Ante esta situaci√≥n, te presentamos los dos posibles escenarios:\n\n-Si tu cr√©dito sigue activo:\nNo es necesario que hagas nada por ahora. Una vez que termines de pagarlo, podr√°s solicitar nuevamente el retiro de estos recursos.\n\n-Si ya terminaste de pagar tu cr√©dito:\nPara poder liberar tus fondos, es indispensable que nos hagas llegar tu Carta de No Adeudo, emitida por la instituci√≥n de vivienda.\n\nSi ya cuentas con este documento, por favor env√≠alo al correo ueapcoppel@aforecoppel.com para actualizar tu expediente y continuar con el tr√°mite.\n\nAgradecemos tu comprensi√≥n y quedamos a tu disposici√≥n.`, variables: [] },
                { category: 'extras', title: 'Estado de Cuenta', copyCount: 0, description: 'Cuando le hacemos llegar el estado de cuenta al trabajador.', scriptText: `Derivado a tu consulta te enviamos tu estado de cuenta m√°s actual correspondiente al (primer - segundo- tercer) cuatrimestre del 2025 (Meses), adicional te invitamos a registrarte en la App de Afore m√≥vil para que puedas consultar tus movimientos en el momento en que lo requieras. Agradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['primer - segundo- tercer', 'Meses'] },
                { category: 'extras', title: 'Citar al trabajador', copyCount: 0, description: 'Cuando ocupamos citar al trabajador para brindar acompa√±amiento a trav√©s de un monitoreo.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que para asegurar que esta vez tu servicio se realice de manera exitosa, te invitamos a acudir nuevamente a uno de nuestros m√≥dulos de atenci√≥n de Afore Coppel de lunes a viernes en horario de apertura de tienda.\nEs importante que le comentes al asesor previsional que te atienda que se comunique con el √°rea de la Unidad Especializada (UNE). De esta manera, desde nuestro segundo nivel de apoyo, podremos brindarte un seguimiento especial a tu caso durante el servicio y asegurar la correcta gesti√≥n de tu tr√°mite.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables`, variables: [] },
                { category: 'extras', title: 'Fondo de pensiones bienestar', copyCount: 0, description: 'Cuando el trabajador nos env√≠a el formato de devoluci√≥n del FPB y se env√≠a para el pr√≥ximo contingente.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido. Actualmente, hemos recibido tu solicitud de Devoluci√≥n de Recursos del Fondo del Bienestar y nos encontramos gestionando tu petici√≥n. La devoluci√≥n de estos recursos a tu cuenta individual tiene un tiempo estimado de aproximadamente seis semanas.\n\nPor lo anterior, te invitamos a revisar tu cuenta despu√©s de este periodo en uno de nuestros m√≥dulos de atenci√≥n con Asesores Previsionales. Para ubicar el m√≥dulo m√°s cercano, puede consultar el siguiente enlace: https://aforecoppel.com/modulos-afore. As√≠ mismo para asegurar una atenci√≥n oportuna, le recomendamos agendar una cita previamente a trav√©s de nuestra APP AforeM√≥vil o en el portal de internet: https://www.aforeweb.com.mx/. En caso de que decidas acudir sin cita, te informamos que podr√≠as tener que esperar tu turno seg√∫n la disponibilidad del momento.\n\nAgradecemos tu paciencia y comprensi√≥n durante este proceso. Tenga la seguridad de que estamos trabajando para que la devoluci√≥n se realice a la brevedad posible. Seguiremos esforz√°ndonos para brindarte el mejor servicio y experiencias memorables.`, variables: [] },
                { category: 'parciales', title: 'Marca Retiros Proceso de Retiro Parcial Vigente', copyCount: 0, description: 'Cuando la marca de Retiros Proceso de Retiro Parcial est√° activa y a√∫n se encuentra vigente.', scriptText: `Te informamos que estuvimos trabajando en tu solicitud para poder brindarte el servicio requerido, por lo que te indicamos que tu cuenta se encuentra en un proceso operativo activo, ya que tu servicio de retiro parcial que realizaste no concluy√≥ con √©xito. As√≠ que es importante esperar a que finalice correctamente de acuerdo a su tiempo normativo, debido a esto, te mencionamos que podr√°s generar una nueva solicitud despu√©s del d√≠a (Fecha de vigencia), siempre y cuando tu cuenta ya se encuentre libre de procesos operativos ante el instituto.\n\nAgradecemos tu paciencia as√≠ como tu confianza, y seguiremos trabajando para brindarte el mejor servicio as√≠ como experiencias memorables.`, variables: ['Fecha de vigencia'] }
            ];

             const migrationConfirm = confirm("¬øEst√°s seguro de que quieres migrar los datos iniciales? Esta acci√≥n solo debe realizarse una vez en una base de datos vac√≠a.");
            if (!migrationConfirm) {
                console.log("Migraci√≥n cancelada por el usuario.");
                return;
            }
            console.log("Iniciando migraci√≥n...");
            for (const script of initialScripts) {
                try {
                    const { id, ...scriptData } = script; 
                    scriptData.copyCount = scriptData.copyCount || 0;
                    await addDoc(scriptsCollection, scriptData);
                    console.log(`Script "${script.title}" migrado con √©xito.`);
                } catch (e) {
                    console.error("Error migrando script:", script.title, e);
                }
            }
            console.log("¬°Migraci√≥n de datos iniciales completada!");
        };
    </script>
</body>
</html>

